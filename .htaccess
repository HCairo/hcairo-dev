RewriteEngine On

# Avoid rewriting if a file or directory exists with the same name
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Redirect to specific actions
RewriteRule ^projects$ index.php?action=projects [L,QSA]
RewriteRule ^exp$ index.php?action=exp [L,QSA]
RewriteRule ^skills$ index.php?action=skills [L,QSA]
RewriteRule ^contact$ index.php?action=contact [L,QSA]
RewriteRule ^auth$ index.php?action=auth [L,QSA]
# DASHBOARD
RewriteRule ^dashboard$ index.php?action=dashboard [L,QSA]
RewriteRule ^dashboard/projects$ index.php?action=dash_projects [QSA,L]
RewriteRule ^dashboard/exp$ index.php?action=dash_exp [QSA,L]
RewriteRule ^dashboard/skills$ index.php?action=dash_skills [QSA,L]
RewriteRule ^dashboard/contact$ index.php?action=dash_contact [QSA,L]

# Prevent directory listing
Options -Indexes

# Deny access to .htaccess itself
<Files .htaccess>
    Require all denied
</Files>

# Deny access to sensitive files
<FilesMatch "\.(ini|log|sh|sql|bak|config)$">
    Require all denied
</FilesMatch>

# Protect against XSS by setting proper headers
Header set X-XSS-Protection "1; mode=block"
Header set X-Content-Type-Options "nosniff"

# Block access to all files starting with a dot (hidden files)
<FilesMatch "^\.">
    Require all denied
</FilesMatch>